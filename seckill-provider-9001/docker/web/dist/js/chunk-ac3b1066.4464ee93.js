(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ac3b1066"],{"46df":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("d4ec"),c=n("bee2"),o=n("852e"),i=n.n(o),u=n("d640"),a=n("c3ec"),s=function(){function e(){Object(r["a"])(this,e)}return Object(c["a"])(e,null,[{key:"get",value:function(){return i.a.get(u["a"].TOKEN_NAME)}},{key:"verify",value:function(){return void 0!==this.get()||(alert(a["a"].NOT_LOGGED_ON),!1)}}]),e}()},"852e":function(e,t,n){(function(t,n){e.exports=n()})(0,(function(){"use strict";function e(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)e[r]=n[r]}return e}var t={read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function n(t,r){function c(n,c,o){if("undefined"!==typeof document){o=e({},r,o),"number"===typeof o.expires&&(o.expires=new Date(Date.now()+864e5*o.expires)),o.expires&&(o.expires=o.expires.toUTCString()),n=encodeURIComponent(n).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var i="";for(var u in o)o[u]&&(i+="; "+u,!0!==o[u]&&(i+="="+o[u].split(";")[0]));return document.cookie=n+"="+t.write(c,n)+i}}function o(e){if("undefined"!==typeof document&&(!arguments.length||e)){for(var n=document.cookie?document.cookie.split("; "):[],r={},c=0;c<n.length;c++){var o=n[c].split("="),i=o.slice(1).join("=");try{var u=decodeURIComponent(o[0]);if(r[u]=t.read(i,u),e===u)break}catch(a){}}return e?r[e]:r}}return Object.create({set:c,get:o,remove:function(t,n){c(t,"",e({},n,{expires:-1}))},withAttributes:function(t){return n(this.converter,e({},this.attributes,t))},withConverter:function(t){return n(e({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(r)},converter:{value:Object.freeze(t)}})}var r=n(t,{path:"/"});return r}))},c3ec:function(e,t,n){"use strict";t["a"]={ACCOUNT_PWD_NULL_OR_EMPTY:"账号或密码为空",ACCOUNT_OR_PWD_ERROR:"账号或密码错误",ACCOUNT_MUST_BE_DIGITS:"账号id必须为纯数字！",LOGIN_SUCCESS:"登录成功",NAME_ID_NUM_PWD_NULL_OR_EMPTY:"姓名，身份证或密码为空",ENTER_TWICE_PWD_MISMATCH:"两次输入的密码不匹配！",ID_NUM_REPEATED:"身份证号重复",REG_SUCCESS:"注册成功",ID_NUM_FORMAT_ERROR:"身份证号格式错误",LOGIN_REPEAT:"重复登录",NOT_LOGGED_ON:"您还未登录",APPLY_SUCCESS:"申请成功",APPLY_FAILED:"申请失败，您不符合申请条件",APPLY_REPEAT:"重复申请",DOES_NOT_APPLY:"没有申请活动",SECKILL_NOT_STARTED:"秒杀活动还未开始",SECKILL_ENDED:"秒杀活动已经结束",PRODUCT_SOLD_OUT:"商品已经售完",PURCHASE_REPEAT:"重复购买",INVALID_SECKILL_URL:"秒杀链接错误",SECKILL_SUCCESS:"秒杀成功"}},ca68:function(e,t,n){"use strict";n("eadf")},d628:function(e,t,n){"use strict";n.r(t);n("b0c0");var r=n("7a23"),c=function(e){return Object(r["v"])("data-v-1e3cdfee"),e=e(),Object(r["t"])(),e},o={class:"header"},i=c((function(){return Object(r["g"])("div",{class:"left-block"},null,-1)})),u=c((function(){return Object(r["g"])("div",{class:"title"},[Object(r["g"])("div",{class:"title-logo"})],-1)})),a=c((function(){return Object(r["g"])("div",{class:"right-block"},null,-1)})),s={class:"account-bar"},d=c((function(){return Object(r["g"])("div",{class:"account-info"},null,-1)})),l={class:"account-name"},f={class:"content"},b={key:0,class:"seckill-form"},m={class:"information"},O=c((function(){return Object(r["g"])("br",null,null,-1)})),p=c((function(){return Object(r["g"])("br",null,null,-1)})),v={class:"time"},h=Object(r["h"])(" 活动倒计时: "),g={class:"button-view"},j={key:1,class:"seckill-success-form"},_=c((function(){return Object(r["g"])("div",{class:"order-info-title"},"订单信息",-1)})),E={class:"order-info"},C=c((function(){return Object(r["g"])("br",null,null,-1)})),S={class:"button-view"};function w(e,t,n,c,w,D){var k=Object(r["z"])("count-down");return Object(r["s"])(),Object(r["f"])("div",null,[Object(r["g"])("div",o,[i,u,a,Object(r["g"])("div",s,[d,Object(r["g"])("div",l,Object(r["B"])(e.customer.name),1)])]),Object(r["g"])("div",f,[e.gotoOrderPage?Object(r["e"])("",!0):(Object(r["s"])(),Object(r["f"])("div",b,[Object(r["g"])("div",m,[Object(r["h"])(Object(r["B"])(e.activity.product.name)+" ",1),O,p,Object(r["h"])(" 库存总量："+Object(r["B"])(e.activity.amount)+"份 ",1)]),Object(r["g"])("div",v,[h,e.countDown.display?(Object(r["s"])(),Object(r["d"])(k,{key:0,"remain-time":e.countDown.remainSeconds,onCountDownEnd:D.countDownEnd},null,8,["remain-time","onCountDownEnd"])):Object(r["e"])("",!0)]),Object(r["g"])("div",g,[Object(r["g"])("button",{onClick:t[0]||(t[0]=function(){return D.seckillButton&&D.seckillButton.apply(D,arguments)}),class:Object(r["o"])({"enter-button":!0,disabled:!D.enableSeckillButton})},"秒杀",2)])])),e.gotoOrderPage?(Object(r["s"])(),Object(r["f"])("div",j,[_,Object(r["g"])("div",E,[Object(r["h"])(" 订单编号："+Object(r["B"])(e.order.orderId),1),C,Object(r["h"])(" 订单金额："+Object(r["B"])(e.order.orderPrice)+"元 ",1)]),Object(r["g"])("div",S,[Object(r["g"])("button",{onClick:t[1]||(t[1]=function(){return D.payOrderButton&&D.payOrderButton.apply(D,arguments)}),class:"enter-button"},"付款")])])):Object(r["e"])("",!0)])])}var D=n("1da1"),k=(n("96cf"),n("c3ec"));function T(e,t,n,c,o,i){return Object(r["s"])(),Object(r["f"])("span",null,Object(r["B"])(i.hourString+":"+i.minuteString+":"+i.secondString),1)}var I={name:"CountDown",data:function(){return{hour:"",minute:"",second:"",timer:""}},props:{remainTime:{default:""}},mounted:function(){if(this.remainTime>0)return this.hour=Math.floor(this.remainTime/3600%24),this.minute=Math.floor(this.remainTime/60%60),this.second=Math.floor(this.remainTime%60),void this.countDown();this.$emit("count-down-end")},methods:{countDown:function(){var e=this;clearInterval(this.timer),this.timer=setInterval((function(){0===e.hour?0!==e.minute&&0===e.second?(e.second=59,e.minute-=1):0===e.minute&&0===e.second?(e.second=0,e.$emit("count-down-end"),clearInterval(e.timer)):e.second-=1:0!==e.minute&&0===e.second?(e.second=59,e.minute-=1):0===e.minute&&0===e.second?(e.hour-=1,e.minute=59,e.second=59):e.second-=1}),1e3)},formatNum:function(e){return e<10?"0"+e:""+e}},computed:{hourString:function(){return this.formatNum(this.hour)},minuteString:function(){return this.formatNum(this.minute)},secondString:function(){return this.formatNum(this.second)}}},R=n("6b0d"),U=n.n(R);const y=U()(I,[["render",T]]);var L=y,N=n("46df"),P={name:"Seckill",components:{CountDown:L},data:function(){return{customer:{name:"",applied:!1},activity:{startTime:"",product:{name:"",info:""},amount:0},countDown:{display:!1,remainSeconds:0,end:!1},seckillUrl:"",gotoOrderPage:!1,order:{orderId:"",orderPrice:0}}},mounted:function(){var e=this;return Object(D["a"])(regeneratorRuntime.mark((function t(){var n,r,c,o,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(N["a"].verify()){t.next=3;break}return t.next=3,e.$router.push("/");case 3:return t.next=5,e.$store.dispatch("customer/getInfo");case 5:return n=t.sent,t.next=8,e.$store.dispatch("activity/getCurrent");case 8:if(r=t.sent,200===n.code&&200===r.code){t.next=12;break}return t.next=12,e.$router.push("/");case 12:if(e.customer=n.data,e.activity=r.data.activity,e.customer.applied){t.next=19;break}return alert(k["a"].DOES_NOT_APPLY),t.next=18,e.$router.push("/apply");case 18:return t.abrupt("return");case 19:return t.next=21,e.$store.dispatch("activity/getCountDown");case 21:c=t.sent,e.countDown.remainSeconds=c.data.countDown,e.countDown.display=!0,o=e,i=setInterval(Object(D["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("activity/getSeckillUrl");case 2:n=t.sent,200===n.code&&(o.seckillUrl=n.data.seckillUrl,console.log("获取到秒杀链接："+o.seckillUrl),clearInterval(i));case 4:case"end":return t.stop()}}),t)}))),1e3);case 26:case"end":return t.stop()}}),t)})))()},methods:{seckillButton:function(){var e=this;return Object(D["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.enableSeckillButton){t.next=4;break}return t.next=3,alert(k["a"].SECKILL_NOT_STARTED);case 3:return t.abrupt("return");case 4:return t.next=6,e.$store.dispatch("activity/seckill",e.seckillUrl);case 6:if(n=t.sent,500!==n.code){t.next=9;break}return t.abrupt("return");case 9:return e.order=n.data.order,t.next=12,alert(k["a"].SECKILL_SUCCESS);case 12:e.gotoOrderPage=!0;case 13:case"end":return t.stop()}}),t)})))()},payOrderButton:function(){alert("已从您绑定的默认本行卡中扣取款项，支付成功！")},countDownEnd:function(){this.countDown.end=!0}},computed:{enableSeckillButton:function(){return""!==this.seckillUrl&&this.countDown.end}}};n("ca68");const x=U()(P,[["render",w],["__scopeId","data-v-1e3cdfee"]]);t["default"]=x},eadf:function(e,t,n){}}]);
//# sourceMappingURL=chunk-ac3b1066.4464ee93.js.map