(function(){"use strict";var e={89:function(e,t){t.Z=(e,t)=>{const n=e.__vccOpts||e;for(const[r,a]of t)n[r]=a;return n}},442:function(e,t,n){n.d(t,{W:function(){return c}});var r=Cookies,a=n.n(r),o=n(226),i=n(163);class c{static get(){return a().get(o.Z.TOKEN_NAME)}static verify(){return void 0!==this.get()||(alert(i.Z.NOT_LOGGED_ON),!1)}static delete(){a().remove(o.Z.TOKEN_NAME)}}},226:function(e,t,n){function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{Z:function(){return a}});class a{}function o(){switch("production"){case"development":return"http://localhost";case"production":return"http://localhost"}}r(a,"TARGET_BASE_URL",o()),r(a,"ACCOUNT_URL",a.TARGET_BASE_URL+":9010/customer"),r(a,"ACTIVITY_URL",a.TARGET_BASE_URL+":9030/seckillActivity"),r(a,"TOKEN_NAME","token")},163:function(e,t){t["Z"]={ACCOUNT_PWD_NULL_OR_EMPTY:"账号或密码为空",ACCOUNT_OR_PWD_ERROR:"账号或密码错误",ACCOUNT_MUST_BE_DIGITS:"账号id必须为纯数字！",LOGIN_SUCCESS:"登录成功",NAME_ID_NUM_PWD_NULL_OR_EMPTY:"姓名，身份证或密码为空",ENTER_TWICE_PWD_MISMATCH:"两次输入的密码不匹配！",ID_NUM_REPEATED:"身份证号重复",REG_SUCCESS:"注册成功",ID_NUM_FORMAT_ERROR:"身份证号格式错误",LOGIN_REPEAT:"重复登录",NOT_LOGGED_ON:"您还未登录",APPLY_SUCCESS:"申请成功",APPLY_FAILED:"申请失败，您不符合申请条件",APPLY_REPEAT:"重复申请",DOES_NOT_APPLY:"没有申请活动",SECKILL_NOT_STARTED:"秒杀活动还未开始",SECKILL_ENDED:"秒杀活动已经结束",PRODUCT_SOLD_OUT:"商品已经售完",PURCHASE_REPEAT:"重复购买",INVALID_SECKILL_URL:"秒杀链接错误",SECKILL_SUCCESS:"秒杀成功，正在获取订单",PUT_ORDER_FAILED:"下订单失败",PURCHASE_SUCCESS:"支付成功，已从您的默认账号中扣款！",PURCHASE_FAILED:"支付失败，请重新支付！"}},311:function(e){e.exports=Vue}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,n),o.exports}n.m=e,function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}}(),function(){n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,r){return n.f[r](e,t),t}),[]))}}(),function(){n.u=function(e){return"js/"+e+"."+{47:"ca838c7d",542:"0b0aeb6c",558:"a9d65dce",768:"a4ca7b56"}[e]+".js"}}(),function(){n.miniCssF=function(e){return"css/"+e+"."+{47:"75ba0897",542:"c06ad327",558:"4b3d2e17",768:"7ffc76fa"}[e]+".css"}}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="seckill-system-web:";n.l=function(r,a,o,i){if(e[r])e[r].push(a);else{var c,s;if(void 0!==o)for(var u=document.getElementsByTagName("script"),l=0;l<u.length;l++){var d=u[l];if(d.getAttribute("src")==r||d.getAttribute("data-webpack")==t+o){c=d;break}}c||(s=!0,c=document.createElement("script"),c.charset="utf-8",c.timeout=120,n.nc&&c.setAttribute("nonce",n.nc),c.setAttribute("data-webpack",t+o),c.src=r),e[r]=[a];var p=function(t,n){c.onerror=c.onload=null,clearTimeout(m);var a=e[r];if(delete e[r],c.parentNode&&c.parentNode.removeChild(c),a&&a.forEach((function(e){return e(n)})),t)return t(n)},m=setTimeout(p.bind(null,void 0,{type:"timeout",target:c}),12e4);c.onerror=p.bind(null,c.onerror),c.onload=p.bind(null,c.onload),s&&document.head.appendChild(c)}}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){n.p="/"}(),function(){var e=function(e,t,n,r){var a=document.createElement("link");a.rel="stylesheet",a.type="text/css";var o=function(o){if(a.onerror=a.onload=null,"load"===o.type)n();else{var i=o&&("load"===o.type?"missing":o.type),c=o&&o.target&&o.target.href||t,s=new Error("Loading CSS chunk "+e+" failed.\n("+c+")");s.code="CSS_CHUNK_LOAD_FAILED",s.type=i,s.request=c,a.parentNode.removeChild(a),r(s)}};return a.onerror=a.onload=o,a.href=t,document.head.appendChild(a),a},t=function(e,t){for(var n=document.getElementsByTagName("link"),r=0;r<n.length;r++){var a=n[r],o=a.getAttribute("data-href")||a.getAttribute("href");if("stylesheet"===a.rel&&(o===e||o===t))return a}var i=document.getElementsByTagName("style");for(r=0;r<i.length;r++){a=i[r],o=a.getAttribute("data-href");if(o===e||o===t)return a}},r=function(r){return new Promise((function(a,o){var i=n.miniCssF(r),c=n.p+i;if(t(i,c))return a();e(r,c,a,o)}))},a={143:0};n.f.miniCss=function(e,t){var n={47:1,542:1,558:1,768:1};a[e]?t.push(a[e]):0!==a[e]&&n[e]&&t.push(a[e]=r(e).then((function(){a[e]=0}),(function(t){throw delete a[e],t})))}}(),function(){var e={143:0};n.f.j=function(t,r){var a=n.o(e,t)?e[t]:void 0;if(0!==a)if(a)r.push(a[2]);else{var o=new Promise((function(n,r){a=e[t]=[n,r]}));r.push(a[2]=o);var i=n.p+n.u(t),c=new Error,s=function(r){if(n.o(e,t)&&(a=e[t],0!==a&&(e[t]=void 0),a)){var o=r&&("load"===r.type?"missing":r.type),i=r&&r.target&&r.target.src;c.message="Loading chunk "+t+" failed.\n("+o+": "+i+")",c.name="ChunkLoadError",c.type=o,c.request=i,a[1](c)}};n.l(i,s,"chunk-"+t,t)}};var t=function(t,r){var a,o,i=r[0],c=r[1],s=r[2],u=0;if(i.some((function(t){return 0!==e[t]}))){for(a in c)n.o(c,a)&&(n.m[a]=c[a]);if(s)s(n)}for(t&&t(r);u<i.length;u++)o=i[u],n.o(e,o)&&e[o]&&e[o][0](),e[o]=0},r=self["webpackChunkseckill_system_web"]=self["webpackChunkseckill_system_web"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();!function(){var e=n(311);const t={id:"app"};function r(n,r,a,o,i,c){const s=(0,e.resolveComponent)("router-view");return(0,e.openBlock)(),(0,e.createElementBlock)("div",t,[(0,e.createVNode)(s)])}var a={name:"App"},o=n(89);const i=(0,o.Z)(a,[["render",r]]);var c=i,s=VueRouter;const u=(0,s.createRouter)({history:(0,s.createWebHistory)(),routes:[{path:"/",redirect:"/index"},{path:"/index",name:"主页",component:()=>n.e(542).then(n.bind(n,542))},{path:"/register",name:"注册",component:()=>n.e(558).then(n.bind(n,558))},{path:"/apply",name:"申请",component:()=>n.e(47).then(n.bind(n,47))},{path:"/seckill",name:"秒杀",component:()=>n.e(768).then(n.bind(n,768))}]});u.beforeEach(((e,t,n)=>{document.title=e.name,n()}));var l=u,d=Vuex,p={name:"",canApply:!1,applied:!1},m={setName(e,t){e.name=t},setCanApply(e,t){e.canApply=t},setApplied(e,t){e.applied=t},clearAll(e){e.name="",e.canApply=!1,e.applied=!1,console.warn("customer: clear store!")}},f=axios,_=n.n(f);let g=_().create({timeout:1e4,withCredentials:!0});g.interceptors.request.use((e=>(console.log("request "+JSON.stringify({url:e.url,data:e.data},null,4)),e))),g.interceptors.response.use((e=>(console.log("response "+JSON.stringify(e.data,null,4)),500===e.data.code&&alert(e.data.message),e.data)),(e=>{alert(e)}));var y=g,A=sha256;class v{static hash(e){return(0,A.sha256)(e)}}class C{static validIdNum(e){return null!==e&&void 0!==e&&18===e.length&&/^\d+$/.test(e)||/^\d+$/.test(e?.substring(0,17))&&/^[A-Za-z]+$/.test(e?.charAt(17))}}var E=n(226);class h{static async login(e){const{accountIdOrIdNumber:t,password:n}=e;let r=v.hash(n),a=C.validIdNum(t)?{idNumber:t,password:r}:{accountId:t,password:r};return await y.post(E.Z.ACCOUNT_URL+"/login",a)}static async register(e){const{name:t,idNumber:n,password:r}=e;let a=v.hash(r);return await y.post(E.Z.ACCOUNT_URL+"/register",{name:t,idNumber:n,password:a})}static async getInfo(){return await y.post(E.Z.ACCOUNT_URL+"/getInfo")}}var T={login(e,t){return h.login(t)},register(e,t){return h.register(t)},async getInfo({commit:e,state:t}){if(""!==t.name){const{name:e,applied:n,canApply:r}=t;return console.log("customer: get from cache!"),{code:200,data:{name:e,applied:n,canApply:r}}}let n=await h.getInfo();if(200===n.code){const{name:t,applied:r,canApply:a}=n.data;e("setName",t),e("setApplied",r),e("setCanApply",a)}return n}},b={state:p,mutations:m,actions:T,namespaced:!0},O={activity:{startTime:"",product:{name:"",info:""},amount:0,activityInfo:"",rule:{workStatus:!0,inCreditBlacklist:!1,minAge:0,maxAge:0,maxOverdueTimes:0,maxOverdueDays:0,maxOverdueMoney:0}}},S={setActivity(e,t){e.activity=t},clearAll(e){e.activity={startTime:"",product:{name:"",info:""},amount:0,activityInfo:"",rule:{workStatus:!0,inCreditBlacklist:!1,minAge:0,maxAge:0,maxOverdueTimes:0,maxOverdueDays:0,maxOverdueMoney:0}},console.warn("apply: clear store!")}};class I{static async disable(e){const t=window.alert;window.alert=e=>console.warn("alert: "+e);let n=await e();return window.alert=t,n}}class N{static getCurrent(){return y.post(E.Z.ACTIVITY_URL+"/getCurrent")}static apply(){return I.disable((()=>y.post(E.Z.ACTIVITY_URL+"/apply")))}static getCountDown(){return y.post(E.Z.ACTIVITY_URL+"/getCountDown")}static getSeckillUrl(){return I.disable((()=>y.post(E.Z.ACTIVITY_URL+"/getSeckillUrl")))}static seckill(e){return y.post(E.Z.ACTIVITY_URL+"/seckill/"+e)}static getOrder(){return y.post(E.Z.ACTIVITY_URL+"/getOrder")}static pay(e){const{orderId:t}=e;return y.post(E.Z.ACTIVITY_URL+"/pay","orderId="+t)}}var L=n(163),R={async getCurrent({state:e,commit:t}){if(""!==e.activity.startTime)return console.log("activity: get from cache!"),{code:200,data:e.activity};let n=await N.getCurrent();return 200===n.code&&t("setActivity",n.data),n},async apply({commit:e}){let t=await N.apply();return 200!==t.code&&t.message!==L.Z.APPLY_REPEAT||(e("customer/setApplied",!0,{root:!0}),console.log("apply: update cache (customer.applied -> true)")),t},async getCountDown(){return N.getCountDown()},async getSeckillUrl(){return N.getSeckillUrl()},async seckill(e,t){return N.seckill(t)},async getOrder(){return N.getOrder()},async pay(e,t){return N.pay(t)}},U={state:O,mutations:S,actions:R,namespaced:!0},w=n(442),k={logout({commit:e}){e("activity/clearAll",!0,{root:!0}),e("customer/clearAll",!0,{root:!0}),w.W["delete"]()}},P={actions:k,namespaced:!0},D=(0,d.createStore)({modules:{customer:b,activity:U,settings:P}});(0,e.createApp)(c).use(l).use(D).mount("#app")}()})();
//# sourceMappingURL=app.2e3adcf6.js.map