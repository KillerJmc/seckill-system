import{defineComponent as g,onBeforeMount as C,ref as p,resolveComponent as w,openBlock as h,createElementBlock as y,createElementVNode as e,withDirectives as _,vModelText as d,withKeys as E,createVNode as x,withCtx as N,createTextVNode as B,pushScopeId as I,popScopeId as b}from"https://esm.sh/vue@^3.2.41";import{u as A,a as F,M as c,V as S}from"./settings.88243537.js";import{useRouter as V}from"https://esm.sh/vue-router@^4.1.6";import{_ as D}from"./index.4e7bf9b6.js";import"https://esm.sh/pinia@^2.0.23";import"https://esm.sh/js-cookie@^3.0.1";import"https://esm.sh/axios@^1.1.2";import"https://esm.run/js-sha256@^0.9.0";const n=s=>(I("data-v-70f87104"),s=s(),b(),s),M={class:"main"},O={class:"login-view"},T=n(()=>e("p",{class:"subtitle"},"\u6B22\u8FCE",-1)),k=n(()=>e("p",{class:"title"},"\u8D26\u6237\u767B\u9646",-1)),L={class:"login-form"},P=n(()=>e("p",{class:"account-text"},"\u7528\u6237\u8D26\u53F7/\u8EAB\u4EFD\u8BC1\u53F7",-1)),U=n(()=>e("p",{class:"password-text"},"\u5BC6\u7801",-1)),K=["onKeyup"],R=g({__name:"HomePage",setup(s){const i=V(),m=A(),f=F();C(async()=>{f.verifyLogin()&&await i.push("/apply")});const t=p(""),u=p(""),l=async()=>{if(!t.value||!u.value){alert(c.ACCOUNT_PWD_NULL_OR_EMPTY);return}if(!S.validAccount(t.value)){alert(c.INVALID_ACCOUNT);return}let o=await m.login({accountOrIdNumber:t.value,password:u.value});o.code===500&&alert(o.message),(o.code===200||o.message===c.LOGIN_REPEAT)&&await i.push("/apply")};return(o,a)=>{const v=w("router-link");return h(),y("div",M,[e("div",O,[T,k,e("form",L,[P,_(e("input",{"onUpdate:modelValue":a[0]||(a[0]=r=>t.value=r),class:"account-bar"},null,512),[[d,t.value]]),U,_(e("input",{"onUpdate:modelValue":a[1]||(a[1]=r=>u.value=r),onKeyup:E(l,["enter"]),type:"password",class:"password-bar",autocomplete:"on"},null,40,K),[[d,u.value]])]),e("button",{onClick:l,class:"login-button"},"\u767B\u5F55"),x(v,{to:"/register",class:"register-button"},{default:N(()=>[B("\u6CA1\u6709\u8D26\u6237\uFF1F\u6CE8\u518C\u4E00\u4E2A")]),_:1})])])}}});const Q=D(R,[["__scopeId","data-v-70f87104"]]);export{Q as default};
