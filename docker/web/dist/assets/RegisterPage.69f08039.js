import{defineComponent as E,onBeforeMount as w,ref as p,resolveComponent as b,openBlock as g,createElementBlock as A,createElementVNode as e,withDirectives as c,vModelText as d,withKeys as D,createTextVNode as F,createVNode as h,withCtx as x,pushScopeId as y,popScopeId as M}from"https://esm.sh/vue@^3.2.41";import{u as N,a as I,M as _,V as R}from"./settings.88243537.js";import{useRouter as S}from"https://esm.sh/vue-router@^4.1.6";import{_ as V}from"./index.4e7bf9b6.js";import"https://esm.sh/pinia@^2.0.23";import"https://esm.sh/js-cookie@^3.0.1";import"https://esm.sh/axios@^1.1.2";import"https://esm.run/js-sha256@^0.9.0";const a=r=>(y("data-v-34150bb6"),r=r(),M(),r),k={class:"main"},T={class:"register-view"},U=a(()=>e("p",{class:"title"},"\u8D26\u6237\u6CE8\u518C",-1)),P={class:"register-form"},K=a(()=>e("p",{class:"account-text"},"\u7528\u6237\u59D3\u540D",-1)),L=a(()=>e("p",{class:"id-number-text"},"\u8EAB\u4EFD\u8BC1\u53F7\u7801",-1)),O=a(()=>e("p",{class:"password-text"},"\u5BC6\u7801",-1)),W=a(()=>e("p",{class:"password-text2"},"\u786E\u8BA4\u5BC6\u7801",-1)),H=["onKeyup"],Y={class:"back-text"},j=E({__name:"RegisterPage",setup(r){const m=S(),B=N(),f=I();w(async()=>{f.verifyLogin()&&await m.push("/apply")});const l=p(""),s=p(""),o=p(""),n=p(""),v=async()=>{if(!l.value||!s.value||!o.value||!n.value){await alert(_.NAME_ID_NUM_PWD_NULL_OR_EMPTY);return}if(!R.validIdNum(s.value)){alert(_.ID_NUM_FORMAT_ERROR);return}if(o.value!==n.value){await alert(_.ENTER_TWICE_PWD_MISMATCH);return}let i=await B.register({name:l.value,idNumber:s.value,password:o.value});i.code===200?(await alert("\u6CE8\u518C\u6210\u529F\uFF0C\u60A8\u7684\u8D26\u53F7\u4E3A\uFF1A"+i.data.account+"\uFF0C\u6B63\u5728\u4E3A\u60A8\u8DF3\u8F6C\u5230\u767B\u5F55\u754C\u9762..."),await m.push("/")):await alert(i.message)};return(i,u)=>{const C=b("router-link");return g(),A("div",k,[e("div",T,[U,e("form",P,[K,c(e("input",{"onUpdate:modelValue":u[0]||(u[0]=t=>l.value=t),type:"text",class:"account-bar",placeholder:"\u8BF7\u8F93\u5165\u60A8\u7684\u771F\u5B9E\u59D3\u540D"},null,512),[[d,l.value]]),L,c(e("input",{"onUpdate:modelValue":u[1]||(u[1]=t=>s.value=t),type:"text",class:"id-number-bar",placeholder:"\u8BF7\u8F93\u5165\u60A8\u7684\u8EAB\u4EFD\u8BC1\u53F7\u7801"},null,512),[[d,s.value]]),O,c(e("input",{"onUpdate:modelValue":u[2]||(u[2]=t=>o.value=t),type:"password",class:"password-bar",placeholder:"\u8BF7\u8BBE\u7F6E\u60A8\u7684\u5BC6\u7801",autocomplete:"off"},null,512),[[d,o.value]]),W,c(e("input",{"onUpdate:modelValue":u[3]||(u[3]=t=>n.value=t),onKeyup:D(v,["enter"]),type:"password",class:"password-bar2",placeholder:"\u8BF7\u518D\u6B21\u786E\u8BA4\u60A8\u7684\u5BC6\u7801",autocomplete:"off"},null,40,H),[[d,n.value]])]),e("button",{onClick:v,class:"register-button"},"\u6CE8\u518C"),e("p",Y,[F(" \u5DF2\u6709\u8D26\u6237\uFF0C"),h(C,{to:"/"},{default:x(()=>[F("\u76F4\u63A5\u767B\u5F55")]),_:1})])])])}}});const ee=V(j,[["__scopeId","data-v-34150bb6"]]);export{ee as default};
